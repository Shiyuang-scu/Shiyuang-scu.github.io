# wkk 设计笔记

经过一段时间的调研，终于确定了核心系统的设计，这里记录一下，开发时迷失了可以看。

<!-- MarkdownTOC -->

- 系统概述
- 相关技术选择
- 实现流程
- 如何标注
- 如何检索
- 可能问题

<!-- /MarkdownTOC -->


## 系统概述

知识树是核心，加上文本分类与推荐系统(不一定能做的完)

从ssco中抽取部分本体作为初始网络，网络分为四层：

1. 总分类(Root)
2. 领域大类(父概念只有总分类，属于二级概念)
3. 过渡类(父概念只有总分类以及领域大类，在这一层之下就没有树状结构了)
4. 本体类(父概念为2类或者3类，这一层会有各种的父子概念交叉，弱化层级结构)
5. 基底类(不再有子类的类)

其中 123类为具体需要分类的候选，而本体类作为知识推理和逻辑推断的元素，现在利用关键词匹配进行推理和概率传递，通过兄弟节点和父节点的传递来进行概率累积，最终判断属于哪个类别。利用 tag。不能确定的归入总分类，让用户自行判断

进行推荐的时候，同样是根据关键词匹配，来进行具体的推荐，来给出同层级书籍和上一层的书籍推荐，并给出具体的推荐理由

所以这里就要标注数据了，例如哪本书属于哪一些节点，然后每个节点有哪些单词，用来进行匹配和对比


目前在设计和开发的应用，是一个基于知识图谱的个人信息管理工具。需要强调的是，这里的知识图谱，和前文提及的有一些不同，因为定位于个人信息管理，不可能也不需要进行如此庞大的数据分析收集。

这里知识图谱可以看做是树和森林(数据结构)的组合：根节点为总分类，下属各个学科，领域，然后不同的学科领域再往下细分，像树一样。在前几层(也就是比较广义的学科时)树是不允许交叉的。而进入比较细分的领域(也就是各种学科的技术开始交叉，有交叉学科的层级)不同领域的内容可以开始交叉，这时候表示的数据结构也要开始变化，需要弱化层级，加强联系。

像生活大爆炸里的多维象棋一样，整个知识图谱是一个多维的表示，不同层级有不同层级的基本逻辑。比方说在比较抽象的层级，这里的学科不能交叉，也有一定的差异，比方说语文数学英语之类的。在下面相对具体的层级，比方说机器学习这一层，其实可以应用到更多不同的细分领域，就可以开始互相交叉了。也就是说越具体，数据结构越复杂。

信息的组织一定要有一个轴，这个轴是什么，怎么去展示，很重要。现在我的做法是用ssco作为轴，加上text classification作为资料补充，以这个轴来做基于图的推荐。这里特别的地方，一个是小规模，一个是个人化。这意味着使用时需要加入自己的标注，始终觉得semi-supervised的方法才是最可行的。当然，学术界和工业界都还没有做好的东西，我不会涉及，只在一个小的子集进行尝试。

在进行信息的推荐和整理时，就可以根据知识图谱，进行同层和跨层的检索。用户的笔记，也就是在完善整个知识图谱，这个完善的过程，一部分自动，一部分是手动(因为更加准确，相当于训练边的强度)，用户可以看到自己的知识架构的茁壮程度，也可以基于此给出具体的可操作的建议。有新的内容加入时，也可以自动分类到不同的层级领域类别，进行统一的管理。

## 相关技术选择

+ tag 是一种简单有效的方法
+ 知识树相当于基因编码(User Profile，根据用户的笔记可以进行倾向性训练)
+ 协同过滤不可用，因为是个人应用
+ 混合推荐与分类(知识树、概率模型、信息提取多种方式都做，来进行比较的选取)
+ 词袋模型+隐含主题模型(topic modeling)
+ TFIDF 提取关键词(和上面的进行替换)
+ 笔记元描述的项目(关键词、分类等等)
+ 同义词的统一
+ 停用词
+ SVM 或者 Naive Bayes
+ 结果评估 Recall, Precision, F-Measure
+ TFIDF
+ 基于图算法的分类
+ 词表的倒排索引

## 实现流程

+ 知识图谱(ssco的子集, 中文本体)
+ 中文分词(jieba)
    + 外挂行业词库
+ 图谱中entity的搜索，索引什么的再说，目前先不考虑速度
+ 文本分类的判断(textgrocery, naive bayse, 图搜索)
+ 书籍推荐(图搜索, 基于tag)
+ 图的展示
+ 图的数据结构(json存储，读入)
+ 协同知识库

## 如何标注

现在有两种思路

1. 直接标注笔记属于哪一类，然后自动把该类的词加到那个节点的属性中
2. 直接标注这个词属于哪一类，

感觉第一种工作量比较小，也比较方便进行后续的修改，也能保证不同模型的应用。

有的笔记属于两个大类，这里就暂时随便挑一个

## 如何检索

笔记(with label) - tag - 绑定 node - 倒排索引

来了新笔记 - tag - 找索引 - 找 node - gensim 比较同一个node 中的相似笔记 - 返回

关键词属于不同的分类怎么办，那么比较其他词所属的分类，投票挑最可能的即可，投票再相同呢？说明这两类可能都可以，那么就随缘一个即可

词袋模型没时间了，暂时不弄

找到对应节点之后比较相似度还需要找到对应的笔记(这个就需要标注数据整理)，然后gensim 比较相似度(这个暂时语料库没有准备好，就先用简单的算法了)

可以试试看 snownlp 的文本相似



## 可能问题

+ 冷启动问题(节点，笔记，书籍)
+ 对于一些冷门物品的推荐
+ 数据稀疏问题
+ 扩展性问题
